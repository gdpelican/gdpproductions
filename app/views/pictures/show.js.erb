var html = '<%= escape_javascript(render partial: 'picture_data', locals: { picture: picture }) %>';
var viewport = $('#galleryViewport');
var wrapper = viewport.find('.pictureWrapper');
var loading = viewport.find('.loading');
var image = new Image();

image.onload = function() {
	wrapper.html(html).show();
	loading.hide();
	Desktop.reinitializeScroller(viewport);
};
image.src = '<%= picture[:url] %>';